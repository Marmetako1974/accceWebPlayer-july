version: '3.8'

    
services:
  init:
    image: alpine:3.15
    volumes:
      - ./run_docker.sh:/run_docker.sh:ro
    entrypoint: ["/bin/sh", "/run_docker.sh"]
    # Esto hace que el contenedor se ejecute y finalice
  web:
    build: .
    ports:
      - "${PORT:-5001}:5000"
    volumes:
      - ./resources:/app/resources
      - ./static:/app/static
    environment:
      - FLASK_ENV=development
      - EPG_XML_PATH=https://epgshare01.online/epgshare01/epg_ripper_ES1.xml.gz
    restart: unless-stopped
  acestream-http-proxy:
    image: "${ACESTREAM_IMAGE}"
    container_name: acestream-http-proxy
    restart: unless-stopped
    #Descomentar las siguientes líneas si quieres permitir la ejecución desde internet. En caso contrario, solo funcionará en tu red local 
    #environment:
    #  - ALLOW_REMOTE_ACCESS=yes
    ports:
      - "${PORTACE:-6878}:6878"


